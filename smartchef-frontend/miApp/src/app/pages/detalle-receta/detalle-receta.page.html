<ion-header class="ion-no-border">
  <ion-toolbar color="clear" class="toolbar-transparente">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/main" color="light"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button color="light">
        <ion-icon slot="icon-only" name="heart-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

  <!-- Imagen de la receta (usando id_foto para construir URL o placeholder) -->
  <div class="imagen-portada-contenedor">
    <ion-img
      [src]="
        receta.id_foto
          ? '/api/foto/' + receta.id_foto
          : 'assets/img/placeholder.png'
      "
      class="imagen-portada">
    </ion-img>

    <div class="titulo-overlay">
      <h1 class="receta-title">{{ receta.nombre }}</h1>
      <div class="rating-bar">
        <ion-icon name="star"></ion-icon>
        {{ receta.valoracion_promedio !== null ? receta.valoracion_promedio : 'Sin valoración' }}
      </div>
    </div>
  </div>

  <!-- Datos principales -->
  <ion-card class="metadatos-card ion-no-margin">
    <div class="metadatos-grid">

      <div class="metadato-item">
        <ion-icon name="time-outline"></ion-icon>
        <span>{{ receta.tiempo_preparacion }} min</span>
        <p>Tiempo</p>
      </div>

      <div class="metadato-item">
        <ion-icon name="fast-food-outline"></ion-icon>
        <span>{{ receta.porciones }}</span>
        <p>Porciones</p>
      </div>

      <div class="metadato-item">
        <ion-icon name="globe-outline"></ion-icon>
        <span>{{ receta.dificultad }}</span>
        <p>Dificultad</p>
      </div>

    </div>
  </ion-card>

  <!-- Descripción -->
  <ion-card class="section-card ion-no-margin">
    <ion-card-header>
      <ion-card-title>Descripción</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>{{ receta.descripcion }}</p>
    </ion-card-content>
  </ion-card>

  <!-- Ingredientes
  <ion-card *ngIf="receta.nombresIngredientes? receta.nombresIngredientes.length > 0 " class="section-card ion-no-margin">
    <ion-card-header>
      <ion-card-title>Ingredientes</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list lines="full">
        <ion-item *ngFor="let ingrediente of receta.nombresIngredientes">
          <ion-label>{{ ingrediente }}</ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card> -->

  <!-- Instrucciones -->
  <ion-card class="section-card ion-no-margin">
    <ion-card-header>
      <ion-card-title>Instrucciones</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p style="white-space: pre-line;">{{ receta.instrucciones }}</p>
    </ion-card-content>
  </ion-card>

  <!-- Información adicional -->
  <ion-card class="section-card ion-no-margin">
    <ion-card-content>
      <p><strong>Costo estimado:</strong> {{ receta.costo_estimado | currency:'EUR':'symbol':'1.2-2' }}</p>
      <p><strong>Fecha de creación:</strong> {{ receta.fecha_creacion | date:'longDate' }}</p>
      <p><strong>Estado:</strong> {{ receta.activa ? 'Activa' : 'Inactiva' }}</p>
    </ion-card-content>
  </ion-card>

</ion-content>
